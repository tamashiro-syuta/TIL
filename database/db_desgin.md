# 達人に学ぶDB設計徹底指南書

## 知りたいこと
- DB設計(モデル設計)のアンチパターンとベストプラクティス
  - 物理設計はそこまで要らない(だいたいフルマネージドなクラウド使うことが多いから)
- 今まで設計してきたDBの設計がどれくらい正しいかを知りたい
  - 同時に良くなかった設計があれば、どう改善できたか知りたい

***

## はじめにとおわりの要約
- 論理設計と物理設計はどちらも大事でトレードオフの関係
- だが、優先するべきは論理設計
  - 物理設計はハードの品質が上がれば解決されるが、論理設計はそうはいかない
- 基本は論理設計が優先だけど、パフォーマンスがシビアな時には物理設計も考慮して設計した方が良いよね

***

## 第1章 データベースを制する者はシステムを制す
- DOA >>> POA
  - DOA(Data Oriented Approach): データを中心に設計しようね、データは一元管理しようね
    - プログラミングする前に、まずはDBの設計から!!!
  - POA(Process Oriented Approach): プロセスを中心に設計しようね
    - まずはプログラムを書いて、DBの設計は後回し!!!
  - 言わずもがなだが、DB設計の方が大事。プログラムよりDB設計の方が変更しにくいし、長生きだからちゃんと作っていた方が良い

### 3層スキーマ
- 外部スキーマ: ビュー
  - ユーザーが見るデータみたいなイメージ
  - レコードの一部だけを取り出して表示する的なやつ
    - ex) テーブル的にはA,B,Cの3つのカラムがあるけど、ビュー的にはAだけを表示する。この時、ユーザーから見えるデータ(外部スキーマ)はAだけ
  - Railsでいうところの`view`のこと
- 概念スキーマ: テーブル
  - 開発者が意識しているスキーマ
  - Railsでいうところの`schema.rb`のこと
  - テーブル構成、テーブル同士の関係などを定義
  - 概念スキーマは、外部スキーマと内部スキーマの間に位置し、緩衝材のような役割を果たす = "データ独立性"
    - 外部スキーマ(ユーザーに見せるデータ)を変更したい！ → 概念スキーマから取り出す値を変更するだけでOK
    - 内部スキーマを変更したい!(データの保持の仕方) → 概念スキーマは変更せず、内部スキーマだけ変更すればOK(概念スキーマの定義通りであればどう保持しようがOK)
- 内部スキーマ: ファイル
  - RDBMSから見たスキーマ
  - 開発者が定義した概念スキーマをDB内部ではどのように保存しているか？を定義しているスキーマ

***

## 第2章 論理設計と物理設計

***

## 第3章 論理設計と正規化

***

## 第4章 ER図 ~複数のテーブルの関係を表現する~

***

## 第5章 論理設計とパフォーマンス ~正規化の欠点と非正規化~

***

## 第6章 データベースとパフォーマンス

***

## 第7章 論理設計のバッドノウハウ

***

## 第8章 論理設計のグレーノウハウ

***

## 第9章 一歩進んだ論理設計 ~SQLで木構造を扱う~

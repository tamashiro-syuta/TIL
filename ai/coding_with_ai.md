---
title: "コード×AI"
tags: ["AI", "書籍"]
---

# 考え方
## コーディング時の考え方
- AIが生成したコードを **「正しくレビューし、使用の可否を判断すること」** が必要不可欠
  - テストが通っても、無批判に組み込むことはリスク
- AI時代には **「提案されたコードを理解し、その動作を確認してから採用するプロセスの徹底」** が求められる
  - **提案したコード量が少なくても、既存システムとの生合成、依存関係、影響範囲がの考慮が不可欠**
- そのため、人間が確認しやすい単位に分割してAIに任せることが重要
- コード生成では「高速にトライ&エラーを繰り返す」ことが重要
  - ここでいうコード生成は、GitHub CopilotやCursorのcomposerなどのこと
  - 3回程度の迅速な施行を通じて、AIにとってタスクが適切かを判断する必要がある
  - 大事なのは初回のプロンプトの質ではなく、**施行回数を重ねて方向性を探る**こと

### 正しくレビューするためには
- 「適量のコードを、ゆっくりとしたペースで、限られた時間内でレビューする」ことが最も効果的らしい(なんかの実験結果らしい)
- 目安は、**400行/レビュー** くらいが良いらしい
  - この目安を超えると欠陥を見つける能力が低下するとのこと
- まあ、こはいえ個人差はあるから、自分にあった量を見つけるのが大切

### 「AIにコードベース全体を理解させたい」と言う願望は捨てた方が良い
- プロンプトはトークンというAIが理解できる最小単位に分割され、モデルによって許容できるトークン数は決まっている
- どのモデルでも共通して、**「ちょうど良い数のトークン数を渡すことが質の高い回答を引き出すコツ」** である
- 2024年10月時点ではおおよそ数ファイル程度(2000トークンくらい)がベストと言われている
  - が、個人的には今後はどんどん増加してゆくゆくはコードベース全体でもいけるようになりそうかなって思っているので、現時点でのベストプラクティス程度に考えている
  - 実体験として、cursorで`@Codebase`にすると精度が悪くなる感覚はある

## 職業としての考え方
- ロジックやアルゴリズムといった抽象的な概念を扱う領域では、人間の綿密な確認が不可欠になる
  - 単純なコーディングスキルよりも、ドメイン知識の有無が重要になる
- AI時代はAIの提案に対して適切に「評価」する能力が重要になる
  - 具体的には以下
    - 「コードの品質」
    - 「パフォーマンス」
    - 「セキュリティ」
    - 「既存システムとの整合性」
    - 「プロジェクト全体の方針」
  - これらの能力は、継続的に学習を続けることで徐々に培われるもの。失敗から学び、常に新しい技術やベストプラクティスを吸収し続ける姿勢が求められる
- AI時代では用途に応じて使用するツールを分けるのが良い
  |  | 自動補完型 | 対話方 | エージェント型 |
  |--------|------|------|--------|
  | 実装 | 集中力を伴うコーディング支援 | ボイラープレート or コードの叩き台の作成 | 複数ファイルに及ぶ実装 |
  | 改善 | トライ&エラーによる高速改善 | コードレビュー、部分的なリファクタ | 全体的な修正箇所の列挙と改善 |
  | 質問 | 軽量な質問 | 実装内容の相談や技術的な質問 | 複合的な対象物へのレビューの実施 |
  | 変換 | コメントの作成やサンプル提示による実装 | ドキュメントやコードを別のフォーマットに変換 | 全体的なプロジェクトの更新(機能やドキュメントの追加)

## 学習時の考え方
- 対話型AIを用いると学習スピードが格段に上がる
- AIは同じ概念や問題に対して複数の異なるアプローチや実装例を示すことができる
- なので、初学者であっても多角的な視点から物事を理解できる

## 組織としての考え方
- AIツールの導入だけでの差別化は難しい
- 「組織に合わせたカスタマイズ」が一つの選択肢になる
- RAGやファインチューニングなどでカスタマイズ
- コード生成の品質をあげるためにドキュメントの整備などを徹底し **「組織としてAIを育てる」** ことが重要
- そのため、内製化しAIの利活用を進める需要が増加する
  - ナレッジベースの構築
    - AIが参照できる情報量を増やし、AIの提案の質を向上させる
    - ex: wikiやドキュメントの整備、暗黙知となっているノウハウの言語化
  - AIのためのコードベース整備
    - AIが参照できるコードを増やす
    - ex: 共通処理をライブラリ化、コーディング規約の作成と遵守
  - AIプラットフォームやツールの活用
    - 社員が活用できるようにボイラープレートや社内向けのプロンプト群の整備
  - コードを組織として育てる
    - 内製化だけでなく、メンテして改善を繰り返すのが大事なんだぜ
    - みんなで協業する "企業内オープンソース" 的な風土が大事なんだぜ
- AIでコストカットっていうよりは、AIでどう差別化して優位性を出していくか？が大事なんだぜ
